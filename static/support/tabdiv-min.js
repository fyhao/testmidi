/* Jison generated parser */
var vextab_parser=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,e:3,maybe_vextab:4,EOF:5,vextab:6,stave:7,voice:8,maybe_options:9,stave_data:10,OPTIONS:11,options:12,TABSTAVE:13,VOICE:14,stave_additions:15,TEXT:16,text:17,NOTES:18,notes:19,WORD:20,"=":21,STR:22,",":23,lingo:24,line:25,chord:26,time:27,bar:28,"[":29,"]":30,tuplets:31,annotations:32,command:33,rest:34,"|":35,":":36,frets:37,maybe_decorator:38,"/":39,string:40,chord_line:41,".":42,"(":43,")":44,articulation:45,NUMBER:46,abc:47,_:48,timed_fret:49,time_values:50,maybe_dot:51,time_unit:52,maybe_slash:53,w:54,h:55,q:56,d:57,S:58,"-":59,s:60,t:61,T:62,b:63,p:64,v:65,V:66,u:67,"^":68,$:69,annotation_words:70,"!":71,COMMAND:72,"#":73,ABC:74,abc_accidental:75,accidental_type:76,"@":77,n:78,"~":79,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPTIONS",13:"TABSTAVE",14:"VOICE",16:"TEXT",18:"NOTES",20:"WORD",21:"=",22:"STR",23:",",29:"[",30:"]",35:"|",36:":",39:"/",42:".",43:"(",44:")",46:"NUMBER",48:"_",54:"w",55:"h",56:"q",57:"d",58:"S",59:"-",60:"s",61:"t",62:"T",63:"b",64:"p",65:"v",66:"V",67:"u",68:"^",69:"$",71:"!",72:"COMMAND",73:"#",74:"ABC",77:"@",78:"n",79:"~"},productions_:[0,[3,2],[4,0],[4,1],[6,1],[6,2],[7,3],[7,2],[7,2],[8,1],[8,1],[10,1],[10,2],[15,2],[15,2],[9,0],[9,1],[12,3],[12,4],[17,1],[17,3],[19,1],[19,2],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[28,1],[28,3],[28,3],[28,3],[28,3],[28,3],[25,4],[41,1],[41,3],[26,4],[26,5],[37,1],[37,1],[37,4],[37,2],[37,4],[49,5],[49,1],[49,5],[49,8],[49,1],[49,4],[27,3],[50,2],[52,1],[52,1],[52,1],[52,1],[51,0],[51,1],[53,0],[53,1],[40,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[38,1],[38,1],[38,1],[38,1],[38,0],[31,3],[31,5],[32,3],[70,1],[70,3],[33,3],[34,2],[34,3],[34,4],[47,3],[75,1],[75,2],[75,1],[75,2],[75,1],[75,0],[76,0],[76,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return Vex.Flow.VexTab.DEBUG&&o[a-1]&&(console.log(o[a-1]),console.log(JSON.stringify(o[a-1],null," "))),o[a-1];case 2:this.$=null;break;case 3:this.$=o[a];break;case 4:this.$=[o[a]];break;case 5:this.$=[].concat(o[a-1],o[a]);break;case 6:this.$={element:o[a-2],options:o[a-1],notes:o[a].notes,text:o[a].text,_l:u[a-2].first_line,_c:u[a-2].first_column};break;case 7:this.$={element:o[a-1],options:o[a],_l:u[a-1].first_line,_c:u[a-1].first_column};break;case 8:this.$={element:"options",params:o[a],_l:u[a-1].first_line,_c:u[a-1].first_column};break;case 11:this.$=o[a];break;case 12:var f=[].concat(o[a-1].text,o[a].text),l=[].concat(o[a-1].notes,o[a].notes);this.$={text:f,notes:l};break;case 13:this.$={text:o[a],notes:[]};break;case 14:this.$={notes:o[a],text:[]};break;case 15:this.$=null;break;case 16:this.$=o[a];break;case 17:this.$=[{key:o[a-2],value:o[a],_l:u[a-2].first_line,_c:u[a-2].first_column}];break;case 18:this.$=[].concat(o[a-3],[{key:o[a-2],value:o[a],_l:u[a-2].first_line,_c:u[a-2].first_column}]);break;case 19:this.$=[{text:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 20:this.$=[].concat(o[a-2],{text:o[a],_l:u[a].first_line,_c:u[a].first_column});break;case 21:this.$=o[a];break;case 22:this.$=[].concat(o[a-1],o[a]);break;case 23:this.$=o[a];break;case 24:this.$=o[a];break;case 25:this.$=o[a];break;case 26:this.$=[{command:"bar",type:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 27:this.$=[{command:"open_beam",_l:u[a].first_line,_c:u[a].first_column}];break;case 28:this.$=[{command:"close_beam",_l:u[a].first_line,_c:u[a].first_column}];break;case 29:this.$=[{command:"tuplet",params:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 30:this.$=[{command:"annotations",params:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 31:this.$=[{command:"command",params:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 32:this.$=[{command:"rest",params:o[a]}];break;case 33:this.$="single";break;case 34:this.$="double";break;case 35:this.$="end";break;case 36:this.$="repeat-end";break;case 37:this.$="repeat-begin";break;case 38:this.$="repeat-both";break;case 39:_.extend(_.last(o[a-3]),{decorator:o[a-2]}),_.each(o[a-3],function(e){e.string=o[a]}),this.$=o[a-3];break;case 40:this.$=o[a];break;case 41:this.$=[].concat(o[a-2],o[a]);break;case 42:this.$=[{chord:o[a-2],decorator:o[a]}];break;case 43:this.$=[{chord:o[a-2],articulation:o[a-4],decorator:o[a]}];break;case 44:this.$=[{fret:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 45:this.$=[{abc:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 46:this.$=[{abc:o[a-3],octave:o[a-2],fret:o[a],_l:u[a-3].first_line,_c:u[a-3].first_column}];break;case 47:this.$=[_.extend(o[a],{articulation:o[a-1]})];break;case 48:_.extend(_.last(o[a-3]),{decorator:o[a-2]}),_.extend(o[a],{articulation:o[a-1]}),o[a-3].push(o[a]),this.$=o[a-3];break;case 49:this.$={time:o[a-3],dot:o[a-2],fret:o[a],_l:u[a-4].first_line,_c:u[a-4].first_column};break;case 50:this.$={fret:o[a],_l:u[a].first_line,_c:u[a].first_column};break;case 51:this.$={time:o[a-3],dot:o[a-2],abc:o[a]};break;case 52:this.$={time:o[a-6],dot:o[a-5],abc:o[a-3],octave:o[a-2],fret:o[a]};break;case 53:this.$={abc:o[a],_l:u[a].first_line,_c:u[a].first_column};break;case 54:this.$={abc:o[a-3],octave:o[a-2],fret:o[a],_l:u[a-3].first_line,_c:u[a-3].first_column};break;case 55:this.$={time:o[a-1],dot:o[a]};break;case 56:this.$=o[a-1]+o[a];break;case 57:this.$=o[a];break;case 58:this.$=o[a];break;case 59:this.$=o[a];break;case 60:this.$=o[a];break;case 61:this.$=!1;break;case 62:this.$=!0;break;case 63:this.$="";break;case 64:this.$="s";break;case 65:this.$=o[a];break;case 66:this.$="-";break;case 67:this.$="s";break;case 68:this.$="t";break;case 69:this.$="T";break;case 70:this.$="b";break;case 71:this.$="h";break;case 72:this.$="p";break;case 73:this.$="v";break;case 74:this.$="V";break;case 75:this.$="u";break;case 76:this.$="d";break;case 77:this.$=null;break;case 78:this.$={tuplet:o[a-1]};break;case 79:this.$={tuplet:o[a-3],notes:o[a-1]};break;case 80:this.$=o[a-1];break;case 81:this.$=[o[a]];break;case 82:this.$=[].concat(o[a-2],o[a]);break;case 83:this.$=o[a-1];break;case 84:this.$={position:0};break;case 85:this.$={position:o[a-1]};break;case 86:this.$={position:o[a-1]*-1};break;case 87:this.$={key:o[a-2],accidental:o[a-1],accidental_type:o[a]};break;case 88:this.$="#";break;case 89:this.$="##";break;case 90:this.$="b";break;case 91:this.$="bb";break;case 92:this.$="n";break;case 94:this.$=null;break;case 95:this.$="c"}},table:[{3:1,4:2,5:[2,2],6:3,7:4,8:5,11:[1,6],13:[1,7],14:[1,8]},{1:[3]},{5:[1,9]},{5:[2,3],7:10,8:5,11:[1,6],13:[1,7],14:[1,8]},{5:[2,4],11:[2,4],13:[2,4],14:[2,4]},{5:[2,15],9:11,11:[2,15],12:12,13:[2,15],14:[2,15],16:[2,15],18:[2,15],20:[1,13]},{12:14,20:[1,13]},{5:[2,9],11:[2,9],13:[2,9],14:[2,9],16:[2,9],18:[2,9],20:[2,9]},{5:[2,10],11:[2,10],13:[2,10],14:[2,10],16:[2,10],18:[2,10],20:[2,10]},{1:[2,1]},{5:[2,5],11:[2,5],13:[2,5],14:[2,5]},{5:[2,7],10:15,11:[2,7],13:[2,7],14:[2,7],15:16,16:[1,17],18:[1,18]},{5:[2,16],11:[2,16],13:[2,16],14:[2,16],16:[2,16],18:[2,16],20:[1,19]},{21:[1,20]},{5:[2,8],11:[2,8],13:[2,8],14:[2,8],20:[1,19]},{5:[2,6],11:[2,6],13:[2,6],14:[2,6],15:21,16:[1,17],18:[1,18]},{5:[2,11],11:[2,11],13:[2,11],14:[2,11],16:[2,11],18:[2,11]},{17:22,22:[1,23]},{19:24,21:[1,41],24:25,25:26,26:27,27:28,28:29,29:[1,30],30:[1,31],31:32,32:33,33:34,34:35,35:[1,40],36:[1,39],37:36,43:[1,37],45:38,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],68:[1,42],69:[1,43],71:[1,44],73:[1,45],74:[1,55]},{21:[1,56]},{20:[1,57]},{5:[2,12],11:[2,12],13:[2,12],14:[2,12],16:[2,12],18:[2,12]},{5:[2,13],11:[2,13],13:[2,13],14:[2,13],16:[2,13],18:[2,13],23:[1,58]},{5:[2,19],11:[2,19],13:[2,19],14:[2,19],16:[2,19],18:[2,19],23:[2,19]},{5:[2,14],11:[2,14],13:[2,14],14:[2,14],16:[2,14],18:[2,14],21:[1,41],24:59,25:26,26:27,27:28,28:29,29:[1,30],30:[1,31],31:32,32:33,33:34,34:35,35:[1,40],36:[1,39],37:36,43:[1,37],45:38,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],68:[1,42],69:[1,43],71:[1,44],73:[1,45],74:[1,55]},{5:[2,21],11:[2,21],13:[2,21],14:[2,21],16:[2,21],18:[2,21],21:[2,21],29:[2,21],30:[2,21],35:[2,21],36:[2,21],43:[2,21],46:[2,21],55:[2,21],59:[2,21],60:[2,21],61:[2,21],62:[2,21],63:[2,21],64:[2,21],68:[2,21],69:[2,21],71:[2,21],73:[2,21],74:[2,21]},{5:[2,23],11:[2,23],13:[2,23],14:[2,23],16:[2,23],18:[2,23],21:[2,23],29:[2,23],30:[2,23],35:[2,23],36:[2,23],43:[2,23],46:[2,23],55:[2,23],59:[2,23],60:[2,23],61:[2,23],62:[2,23],63:[2,23],64:[2,23],68:[2,23],69:[2,23],71:[2,23],73:[2,23],74:[2,23]},{5:[2,24],11:[2,24],13:[2,24],14:[2,24],16:[2,24],18:[2,24],21:[2,24],29:[2,24],30:[2,24],35:[2,24],36:[2,24],43:[2,24],46:[2,24],55:[2,24],59:[2,24],60:[2,24],61:[2,24],62:[2,24],63:[2,24],64:[2,24],68:[2,24],69:[2,24],71:[2,24],73:[2,24],74:[2,24]},{5:[2,25],11:[2,25],13:[2,25],14:[2,25],16:[2,25],18:[2,25],21:[2,25],29:[2,25],30:[2,25],35:[2,25],36:[2,25],43:[2,25],46:[2,25],55:[2,25],59:[2,25],60:[2,25],61:[2,25],62:[2,25],63:[2,25],64:[2,25],68:[2,25],69:[2,25],71:[2,25],73:[2,25],74:[2,25]},{5:[2,26],11:[2,26],13:[2,26],14:[2,26],16:[2,26],18:[2,26],21:[2,26],29:[2,26],30:[2,26],35:[2,26],36:[2,26],43:[2,26],46:[2,26],55:[2,26],59:[2,26],60:[2,26],61:[2,26],62:[2,26],63:[2,26],64:[2,26],68:[2,26],69:[2,26],71:[2,26],73:[2,26],74:[2,26]},{5:[2,27],11:[2,27],13:[2,27],14:[2,27],16:[2,27],18:[2,27],21:[2,27],29:[2,27],30:[2,27],35:[2,27],36:[2,27],43:[2,27],46:[2,27],55:[2,27],59:[2,27],60:[2,27],61:[2,27],62:[2,27],63:[2,27],64:[2,27],68:[2,27],69:[2,27],71:[2,27],73:[2,27],74:[2,27]},{5:[2,28],11:[2,28],13:[2,28],14:[2,28],16:[2,28],18:[2,28],21:[2,28],29:[2,28],30:[2,28],35:[2,28],36:[2,28],43:[2,28],46:[2,28],55:[2,28],59:[2,28],60:[2,28],61:[2,28],62:[2,28],63:[2,28],64:[2,28],68:[2,28],69:[2,28],71:[2,28],73:[2,28],74:[2,28]},{5:[2,29],11:[2,29],13:[2,29],14:[2,29],16:[2,29],18:[2,29],21:[2,29],29:[2,29],30:[2,29],35:[2,29],36:[2,29],43:[2,29],46:[2,29],55:[2,29],59:[2,29],60:[2,29],61:[2,29],62:[2,29],63:[2,29],64:[2,29],68:[2,29],69:[2,29],71:[2,29],73:[2,29],74:[2,29]},{5:[2,30],11:[2,30],13:[2,30],14:[2,30],16:[2,30],18:[2,30],21:[2,30],29:[2,30],30:[2,30],35:[2,30],36:[2,30],43:[2,30],46:[2,30],55:[2,30],59:[2,30],60:[2,30],61:[2,30],62:[2,30],63:[2,30],64:[2,30],68:[2,30],69:[2,30],71:[2,30],73:[2,30],74:[2,30]},{5:[2,31],11:[2,31],13:[2,31],14:[2,31],16:[2,31],18:[2,31],21:[2,31],29:[2,31],30:[2,31],35:[2,31],36:[2,31],43:[2,31],46:[2,31],55:[2,31],59:[2,31],60:[2,31],61:[2,31],62:[2,31],63:[2,31],64:[2,31],68:[2,31],69:[2,31],71:[2,31],73:[2,31],74:[2,31]},{5:[2,32],11:[2,32],13:[2,32],14:[2,32],16:[2,32],18:[2,32],21:[2,32],29:[2,32],30:[2,32],35:[2,32],36:[2,32],43:[2,32],46:[2,32],55:[2,32],59:[2,32],60:[2,32],61:[2,32],62:[2,32],63:[2,32],64:[2,32],68:[2,32],69:[2,32],71:[2,32],73:[2,32],74:[2,32]},{38:60,39:[2,77],55:[2,77],57:[1,64],59:[2,77],60:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[1,61],66:[1,62],67:[1,63]},{25:66,37:36,41:65,45:67,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],74:[1,55]},{36:[1,70],43:[1,68],46:[1,71],47:72,49:69,74:[1,55]},{46:[1,75],50:73,52:74,54:[1,76],55:[1,77],56:[1,78]},{5:[2,33],11:[2,33],13:[2,33],14:[2,33],16:[2,33],18:[2,33],21:[2,33],29:[2,33],30:[2,33],35:[2,33],36:[2,33],43:[2,33],46:[2,33],55:[2,33],59:[2,33],60:[2,33],61:[2,33],62:[2,33],63:[2,33],64:[2,33],68:[2,33],69:[2,33],71:[2,33],73:[2,33],74:[2,33]},{35:[1,79],36:[1,80]},{46:[1,81]},{20:[1,83],70:82},{72:[1,84]},{46:[1,86],59:[1,87],73:[1,85]},{39:[2,44],55:[2,44],57:[2,44],59:[2,44],60:[2,44],61:[2,44],62:[2,44],63:[2,44],64:[2,44],65:[2,44],66:[2,44],67:[2,44]},{39:[2,45],46:[1,88],55:[2,45],57:[2,45],59:[2,45],60:[2,45],61:[2,45],62:[2,45],63:[2,45],64:[2,45],65:[2,45],66:[2,45],67:[2,45]},{36:[2,66],43:[2,66],46:[2,66],74:[2,66]},{36:[2,67],43:[2,67],46:[2,67],74:[2,67]},{36:[2,68],43:[2,68],46:[2,68],74:[2,68]},{36:[2,69],43:[2,69],46:[2,69],74:[2,69]},{36:[2,70],43:[2,70],46:[2,70],74:[2,70]},{36:[2,71],43:[2,71],46:[2,71],74:[2,71]},{36:[2,72],43:[2,72],46:[2,72],74:[2,72]},{39:[2,93],46:[2,93],55:[2,93],57:[2,93],59:[2,93],60:[2,93],61:[2,93],62:[2,93],63:[2,93],64:[2,93],65:[2,93],66:[2,93],67:[2,93],73:[1,90],75:89,77:[1,91],78:[1,92],79:[2,93]},{20:[1,93]},{5:[2,17],11:[2,17],13:[2,17],14:[2,17],16:[2,17],18:[2,17],20:[2,17]},{22:[1,94]},{5:[2,22],11:[2,22],13:[2,22],14:[2,22],16:[2,22],18:[2,22],21:[2,22],29:[2,22],30:[2,22],35:[2,22],36:[2,22],43:[2,22],46:[2,22],55:[2,22],59:[2,22],60:[2,22],61:[2,22],62:[2,22],63:[2,22],64:[2,22],68:[2,22],69:[2,22],71:[2,22],73:[2,22],74:[2,22]},{39:[1,95],45:96,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54]},{5:[2,73],11:[2,73],13:[2,73],14:[2,73],16:[2,73],18:[2,73],21:[2,73],29:[2,73],30:[2,73],35:[2,73],36:[2,73],39:[2,73],43:[2,73],46:[2,73],55:[2,73],59:[2,73],60:[2,73],61:[2,73],62:[2,73],63:[2,73],64:[2,73],68:[2,73],69:[2,73],71:[2,73],73:[2,73],74:[2,73]},{5:[2,74],11:[2,74],13:[2,74],14:[2,74],16:[2,74],18:[2,74],21:[2,74],29:[2,74],30:[2,74],35:[2,74],36:[2,74],39:[2,74],43:[2,74],46:[2,74],55:[2,74],59:[2,74],60:[2,74],61:[2,74],62:[2,74],63:[2,74],64:[2,74],68:[2,74],69:[2,74],71:[2,74],73:[2,74],74:[2,74]},{5:[2,75],11:[2,75],13:[2,75],14:[2,75],16:[2,75],18:[2,75],21:[2,75],29:[2,75],30:[2,75],35:[2,75],36:[2,75],39:[2,75],43:[2,75],46:[2,75],55:[2,75],59:[2,75],60:[2,75],61:[2,75],62:[2,75],63:[2,75],64:[2,75],68:[2,75],69:[2,75],71:[2,75],73:[2,75],74:[2,75]},{5:[2,76],11:[2,76],13:[2,76],14:[2,76],16:[2,76],18:[2,76],21:[2,76],29:[2,76],30:[2,76],35:[2,76],36:[2,76],39:[2,76],43:[2,76],46:[2,76],55:[2,76],59:[2,76],60:[2,76],61:[2,76],62:[2,76],63:[2,76],64:[2,76],68:[2,76],69:[2,76],71:[2,76],73:[2,76],74:[2,76]},{42:[1,98],44:[1,97]},{42:[2,40],44:[2,40]},{36:[1,70],46:[1,71],47:72,49:69,74:[1,55]},{25:66,37:36,41:99,45:67,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],74:[1,55]},{39:[2,47],55:[2,47],57:[2,47],59:[2,47],60:[2,47],61:[2,47],62:[2,47],63:[2,47],64:[2,47],65:[2,47],66:[2,47],67:[2,47]},{46:[1,75],50:100,52:74,54:[1,76],55:[1,77],56:[1,78]},{39:[2,50],55:[2,50],57:[2,50],59:[2,50],60:[2,50],61:[2,50],62:[2,50],63:[2,50],64:[2,50],65:[2,50],66:[2,50],67:[2,50]},{39:[2,53],46:[1,101],55:[2,53],57:[2,53],59:[2,53],60:[2,53],61:[2,53],62:[2,53],63:[2,53],64:[2,53],65:[2,53],66:[2,53],67:[2,53]},{5:[2,61],11:[2,61],13:[2,61],14:[2,61],16:[2,61],18:[2,61],21:[2,61],29:[2,61],30:[2,61],35:[2,61],36:[2,61],43:[2,61],46:[2,61],51:102,55:[2,61],57:[1,103],59:[2,61],60:[2,61],61:[2,61],62:[2,61],63:[2,61],64:[2,61],68:[2,61],69:[2,61],71:[2,61],73:[2,61],74:[2,61]},{5:[2,63],11:[2,63],13:[2,63],14:[2,63],16:[2,63],18:[2,63],21:[2,63],29:[2,63],30:[2,63],35:[2,63],36:[2,63],43:[2,63],46:[2,63],53:104,55:[2,63],57:[2,63],58:[1,105],59:[2,63],60:[2,63],61:[2,63],62:[2,63],63:[2,63],64:[2,63],68:[2,63],69:[2,63],71:[2,63],73:[2,63],74:[2,63]},{5:[2,57],11:[2,57],13:[2,57],14:[2,57],16:[2,57],18:[2,57],21:[2,57],29:[2,57],30:[2,57],35:[2,57],36:[2,57],43:[2,57],46:[2,57],55:[2,57],57:[2,57],58:[2,57],59:[2,57],60:[2,57],61:[2,57],62:[2,57],63:[2,57],64:[2,57],68:[2,57],69:[2,57],71:[2,57],73:[2,57],74:[2,57]},{5:[2,58],11:[2,58],13:[2,58],14:[2,58],16:[2,58],18:[2,58],21:[2,58],29:[2,58],30:[2,58],35:[2,58],36:[2,58],43:[2,58],46:[2,58],55:[2,58],57:[2,58],58:[2,58],59:[2,58],60:[2,58],61:[2,58],62:[2,58],63:[2,58],64:[2,58],68:[2,58],69:[2,58],71:[2,58],73:[2,58],74:[2,58]},{5:[2,59],11:[2,59],13:[2,59],14:[2,59],16:[2,59],18:[2,59],21:[2,59],29:[2,59],30:[2,59],35:[2,59],36:[2,59],43:[2,59],46:[2,59],55:[2,59],57:[2,59],58:[2,59],59:[2,59],60:[2,59],61:[2,59],62:[2,59],63:[2,59],64:[2,59],68:[2,59],69:[2,59],71:[2,59],73:[2,59],74:[2,59]},{5:[2,60],11:[2,60],13:[2,60],14:[2,60],16:[2,60],18:[2,60],21:[2,60],29:[2,60],30:[2,60],35:[2,60],36:[2,60],43:[2,60],46:[2,60],55:[2,60],57:[2,60],58:[2,60],59:[2,60],60:[2,60],61:[2,60],62:[2,60],63:[2,60],64:[2,60],68:[2,60],69:[2,60],71:[2,60],73:[2,60],74:[2,60]},{21:[1,107],35:[1,106],36:[1,108]},{35:[1,109],36:[1,110]},{23:[1,112],68:[1,111]},{23:[1,114],69:[1,113]},{23:[2,81],69:[2,81]},{71:[1,115]},{5:[2,84],11:[2,84],13:[2,84],14:[2,84],16:[2,84],18:[2,84],21:[2,84],29:[2,84],30:[2,84],35:[2,84],36:[2,84],43:[2,84],46:[2,84],55:[2,84],59:[2,84],60:[2,84],61:[2,84],62:[2,84],63:[2,84],64:[2,84],68:[2,84],69:[2,84],71:[2,84],73:[2,84],74:[2,84]},{73:[1,116]},{46:[1,117]},{48:[1,118]},{39:[2,94],46:[2,94],55:[2,94],57:[2,94],59:[2,94],60:[2,94],61:[2,94],62:[2,94],63:[2,94],64:[2,94],65:[2,94],66:[2,94],67:[2,94],76:119,79:[1,120]},{39:[2,88],46:[2,88],55:[2,88],57:[2,88],59:[2,88],60:[2,88],61:[2,88],62:[2,88],63:[2,88],64:[2,88],65:[2,88],66:[2,88],67:[2,88],73:[1,121],79:[2,88]},{39:[2,90],46:[2,90],55:[2,90],57:[2,90],59:[2,90],60:[2,90],61:[2,90],62:[2,90],63:[2,90],64:[2,90],65:[2,90],66:[2,90],67:[2,90],77:[1,122],79:[2,90]},{39:[2,92],46:[2,92],55:[2,92],57:[2,92],59:[2,92],60:[2,92],61:[2,92],62:[2,92],63:[2,92],64:[2,92],65:[2,92],66:[2,92],67:[2,92],79:[2,92]},{5:[2,18],11:[2,18],13:[2,18],14:[2,18],16:[2,18],18:[2,18],20:[2,18]},{5:[2,20],11:[2,20],13:[2,20],14:[2,20],16:[2,20],18:[2,20],23:[2,20]},{40:123,46:[1,124]},{36:[1,70],46:[1,71],47:72,49:125,74:[1,55]},{5:[2,77],11:[2,77],13:[2,77],14:[2,77],16:[2,77],18:[2,77],21:[2,77],29:[2,77],30:[2,77],35:[2,77],36:[2,77],38:126,43:[2,77],46:[2,77],55:[2,77],57:[1,64],59:[2,77],60:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[1,61],66:[1,62],67:[1,63],68:[2,77],69:[2,77],71:[2,77],73:[2,77],74:[2,77]},{25:127,37:36,45:67,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],74:[1,55]},{42:[1,98],44:[1,128]},{36:[2,61],51:129,57:[1,103]},{48:[1,130]},{5:[2,55],11:[2,55],13:[2,55],14:[2,55],16:[2,55],18:[2,55],21:[2,55],29:[2,55],30:[2,55],35:[2,55],36:[2,55],43:[2,55],46:[2,55],55:[2,55],59:[2,55],60:[2,55],61:[2,55],62:[2,55],63:[2,55],64:[2,55],68:[2,55],69:[2,55],71:[2,55],73:[2,55],74:[2,55]},{5:[2,62],11:[2,62],13:[2,62],14:[2,62],16:[2,62],18:[2,62],21:[2,62],29:[2,62],30:[2,62],35:[2,62],36:[2,62],43:[2,62],46:[2,62],55:[2,62],59:[2,62],60:[2,62],61:[2,62],62:[2,62],63:[2,62],64:[2,62],68:[2,62],69:[2,62],71:[2,62],73:[2,62],74:[2,62]},{5:[2,56],11:[2,56],13:[2,56],14:[2,56],16:[2,56],18:[2,56],21:[2,56],29:[2,56],30:[2,56],35:[2,56],36:[2,56],43:[2,56],46:[2,56],55:[2,56],57:[2,56],59:[2,56],60:[2,56],61:[2,56],62:[2,56],63:[2,56],64:[2,56],68:[2,56],69:[2,56],71:[2,56],73:[2,56],74:[2,56]},{5:[2,64],11:[2,64],13:[2,64],14:[2,64],16:[2,64],18:[2,64],21:[2,64],29:[2,64],30:[2,64],35:[2,64],36:[2,64],43:[2,64],46:[2,64],55:[2,64],57:[2,64],59:[2,64],60:[2,64],61:[2,64],62:[2,64],63:[2,64],64:[2,64],68:[2,64],69:[2,64],71:[2,64],73:[2,64],74:[2,64]},{5:[2,34],11:[2,34],13:[2,34],14:[2,34],16:[2,34],18:[2,34],21:[2,34],29:[2,34],30:[2,34],35:[2,34],36:[2,34],43:[2,34],46:[2,34],55:[2,34],59:[2,34],60:[2,34],61:[2,34],62:[2,34],63:[2,34],64:[2,34],68:[2,34],69:[2,34],71:[2,34],73:[2,34],74:[2,34]},{5:[2,35],11:[2,35],13:[2,35],14:[2,35],16:[2,35],18:[2,35],21:[2,35],29:[2,35],30:[2,35],35:[2,35],36:[2,35],43:[2,35],46:[2,35],55:[2,35],59:[2,35],60:[2,35],61:[2,35],62:[2,35],63:[2,35],64:[2,35],68:[2,35],69:[2,35],71:[2,35],73:[2,35],74:[2,35]},{5:[2,37],11:[2,37],13:[2,37],14:[2,37],16:[2,37],18:[2,37],21:[2,37],29:[2,37],30:[2,37],35:[2,37],36:[2,37],43:[2,37],46:[2,37],55:[2,37],59:[2,37],60:[2,37],61:[2,37],62:[2,37],63:[2,37],64:[2,37],68:[2,37],69:[2,37],71:[2,37],73:[2,37],74:[2,37]},{5:[2,36],11:[2,36],13:[2,36],14:[2,36],16:[2,36],18:[2,36],21:[2,36],29:[2,36],30:[2,36],35:[2,36],36:[2,36],43:[2,36],46:[2,36],55:[2,36],59:[2,36],60:[2,36],61:[2,36],62:[2,36],63:[2,36],64:[2,36],68:[2,36],69:[2,36],71:[2,36],73:[2,36],74:[2,36]},{5:[2,38],11:[2,38],13:[2,38],14:[2,38],16:[2,38],18:[2,38],21:[2,38],29:[2,38],30:[2,38],35:[2,38],36:[2,38],43:[2,38],46:[2,38],55:[2,38],59:[2,38],60:[2,38],61:[2,38],62:[2,38],63:[2,38],64:[2,38],68:[2,38],69:[2,38],71:[2,38],73:[2,38],74:[2,38]},{5:[2,78],11:[2,78],13:[2,78],14:[2,78],16:[2,78],18:[2,78],21:[2,78],29:[2,78],30:[2,78],35:[2,78],36:[2,78],43:[2,78],46:[2,78],55:[2,78],59:[2,78],60:[2,78],61:[2,78],62:[2,78],63:[2,78],64:[2,78],68:[2,78],69:[2,78],71:[2,78],73:[2,78],74:[2,78]},{46:[1,131]},{5:[2,80],11:[2,80],13:[2,80],14:[2,80],16:[2,80],18:[2,80],21:[2,80],29:[2,80],30:[2,80],35:[2,80],36:[2,80],43:[2,80],46:[2,80],55:[2,80],59:[2,80],60:[2,80],61:[2,80],62:[2,80],63:[2,80],64:[2,80],68:[2,80],69:[2,80],71:[2,80],73:[2,80],74:[2,80]},{20:[1,132]},{5:[2,83],11:[2,83],13:[2,83],14:[2,83],16:[2,83],18:[2,83],21:[2,83],29:[2,83],30:[2,83],35:[2,83],36:[2,83],43:[2,83],46:[2,83],55:[2,83],59:[2,83],60:[2,83],61:[2,83],62:[2,83],63:[2,83],64:[2,83],68:[2,83],69:[2,83],71:[2,83],73:[2,83],74:[2,83]},{5:[2,85],11:[2,85],13:[2,85],14:[2,85],16:[2,85],18:[2,85],21:[2,85],29:[2,85],30:[2,85],35:[2,85],36:[2,85],43:[2,85],46:[2,85],55:[2,85],59:[2,85],60:[2,85],61:[2,85],62:[2,85],63:[2,85],64:[2,85],68:[2,85],69:[2,85],71:[2,85],73:[2,85],74:[2,85]},{73:[1,133]},{46:[1,134]},{39:[2,87],46:[2,87],55:[2,87],57:[2,87],59:[2,87],60:[2,87],61:[2,87],62:[2,87],63:[2,87],64:[2,87],65:[2,87],66:[2,87],67:[2,87]},{39:[2,95],46:[2,95],55:[2,95],57:[2,95],59:[2,95],60:[2,95],61:[2,95],62:[2,95],63:[2,95],64:[2,95],65:[2,95],66:[2,95],67:[2,95]},{39:[2,89],46:[2,89],55:[2,89],57:[2,89],59:[2,89],60:[2,89],61:[2,89],62:[2,89],63:[2,89],64:[2,89],65:[2,89],66:[2,89],67:[2,89],79:[2,89]},{39:[2,91],46:[2,91],55:[2,91],57:[2,91],59:[2,91],60:[2,91],61:[2,91],62:[2,91],63:[2,91],64:[2,91],65:[2,91],66:[2,91],67:[2,91],79:[2,91]},{5:[2,39],11:[2,39],13:[2,39],14:[2,39],16:[2,39],18:[2,39],21:[2,39],29:[2,39],30:[2,39],35:[2,39],36:[2,39],42:[2,39],43:[2,39],44:[2,39],46:[2,39],55:[2,39],59:[2,39],60:[2,39],61:[2,39],62:[2,39],63:[2,39],64:[2,39],68:[2,39],69:[2,39],71:[2,39],73:[2,39],74:[2,39]},{5:[2,65],11:[2,65],13:[2,65],14:[2,65],16:[2,65],18:[2,65],21:[2,65],29:[2,65],30:[2,65],35:[2,65],36:[2,65],42:[2,65],43:[2,65],44:[2,65],46:[2,65],55:[2,65],59:[2,65],60:[2,65],61:[2,65],62:[2,65],63:[2,65],64:[2,65],68:[2,65],69:[2,65],71:[2,65],73:[2,65],74:[2,65]},{39:[2,48],55:[2,48],57:[2,48],59:[2,48],60:[2,48],61:[2,48],62:[2,48],63:[2,48],64:[2,48],65:[2,48],66:[2,48],67:[2,48]},{5:[2,42],11:[2,42],13:[2,42],14:[2,42],16:[2,42],18:[2,42],21:[2,42],29:[2,42],30:[2,42],35:[2,42],36:[2,42],43:[2,42],46:[2,42],55:[2,42],59:[2,42],60:[2,42],61:[2,42],62:[2,42],63:[2,42],64:[2,42],68:[2,42],69:[2,42],71:[2,42],73:[2,42],74:[2,42]},{42:[2,41],44:[2,41]},{5:[2,77],11:[2,77],13:[2,77],14:[2,77],16:[2,77],18:[2,77],21:[2,77],29:[2,77],30:[2,77],35:[2,77],36:[2,77],38:135,43:[2,77],46:[2,77],55:[2,77],57:[1,64],59:[2,77],60:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[1,61],66:[1,62],67:[1,63],68:[2,77],69:[2,77],71:[2,77],73:[2,77],74:[2,77]},{36:[1,136]},{46:[1,137]},{68:[1,138]},{23:[2,82],69:[2,82]},{5:[2,86],11:[2,86],13:[2,86],14:[2,86],16:[2,86],18:[2,86],21:[2,86],29:[2,86],30:[2,86],35:[2,86],36:[2,86],43:[2,86],46:[2,86],55:[2,86],59:[2,86],60:[2,86],61:[2,86],62:[2,86],63:[2,86],64:[2,86],68:[2,86],69:[2,86],71:[2,86],73:[2,86],74:[2,86]},{39:[2,46],55:[2,46],57:[2,46],59:[2,46],60:[2,46],61:[2,46],62:[2,46],63:[2,46],64:[2,46],65:[2,46],66:[2,46],67:[2,46]},{5:[2,43],11:[2,43],13:[2,43],14:[2,43],16:[2,43],18:[2,43],21:[2,43],29:[2,43],30:[2,43],35:[2,43],36:[2,43],43:[2,43],46:[2,43],55:[2,43],59:[2,43],60:[2,43],61:[2,43],62:[2,43],63:[2,43],64:[2,43],68:[2,43],69:[2,43],71:[2,43],73:[2,43],74:[2,43]},{46:[1,139],47:140,74:[1,55]},{39:[2,54],55:[2,54],57:[2,54],59:[2,54],60:[2,54],61:[2,54],62:[2,54],63:[2,54],64:[2,54],65:[2,54],66:[2,54],67:[2,54]},{5:[2,79],11:[2,79],13:[2,79],14:[2,79],16:[2,79],18:[2,79],21:[2,79],29:[2,79],30:[2,79],35:[2,79],36:[2,79],43:[2,79],46:[2,79],55:[2,79],59:[2,79],60:[2,79],61:[2,79],62:[2,79],63:[2,79],64:[2,79],68:[2,79],69:[2,79],71:[2,79],73:[2,79],74:[2,79]},{39:[2,49],55:[2,49],57:[2,49],59:[2,49],60:[2,49],61:[2,49],62:[2,49],63:[2,49],64:[2,49],65:[2,49],66:[2,49],67:[2,49]},{39:[2,51],46:[1,141],55:[2,51],57:[2,51],59:[2,51],60:[2,51],61:[2,51],62:[2,51],63:[2,51],64:[2,51],65:[2,51],66:[2,51],67:[2,51]},{48:[1,142]},{46:[1,143]},{39:[2,52],55:[2,52],57:[2,52],59:[2,52],60:[2,52],61:[2,52],62:[2,52],63:[2,52],64:[2,52],65:[2,52],66:[2,52],67:[2,52]}],defaultActions:{9:[2,1]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}};Vex.L("Starting parser.");var t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return this.begin("notes"),18;case 1:return this.begin("options"),13;case 2:return this.begin("options"),"STAVE";case 3:return this.begin("options"),14;case 4:return this.begin("options"),11;case 5:return this.begin("text"),16;case 6:return 20;case 7:return this.begin("annotations"),"$";case 8:return this.begin("notes"),"$";case 9:return 20;case 10:return this.begin("command"),"!";case 11:return this.begin("notes"),"!";case 12:return 72;case 13:return 22;case 14:return 39;case 15:return"+";case 16:return 36;case 17:return 21;case 18:return 43;case 19:return 44;case 20:return 29;case 21:return 30;case 22:return 68;case 23:return 23;case 24:return 35;case 25:return 42;case 26:return 73;case 27:return 77;case 28:return 63;case 29:return 60;case 30:return 55;case 31:return 64;case 32:return 61;case 33:return 62;case 34:return 59;case 35:return 48;case 36:return 65;case 37:return 66;case 38:return 67;case 39:return 57;case 40:return 46;case 41:return 56;case 42:return 54;case 43:return 55;case 44:return 57;case 45:return 58;case 46:return 74;case 47:return 78;case 48:return 79;case 49:this.begin("INITIAL");break;case 50:break;case 51:return 5;case 52:return"INVALID"}},e.rules=[/^(?:notes\b)/,/^(?:tabstave\b)/,/^(?:stave\b)/,/^(?:voice\b)/,/^(?:options\b)/,/^(?:text\b)/,/^(?:[^\s=]+)/,/^(?:[$])/,/^(?:[$])/,/^(?:[^,$]+)/,/^(?:[!])/,/^(?:[!])/,/^(?:[^!]+)/,/^(?:[^,\r\n]+)/,/^(?:\/)/,/^(?:\+)/,/^(?::)/,/^(?:=)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\^)/,/^(?:,)/,/^(?:\|)/,/^(?:\.)/,/^(?:#)/,/^(?:@)/,/^(?:[b])/,/^(?:[s])/,/^(?:[h])/,/^(?:[p])/,/^(?:[t])/,/^(?:[T])/,/^(?:[-])/,/^(?:[_])/,/^(?:[v])/,/^(?:[V])/,/^(?:[u])/,/^(?:[d])/,/^(?:[0-9]+)/,/^(?:[q])/,/^(?:[w])/,/^(?:[h])/,/^(?:[d])/,/^(?:[S])/,/^(?:[A-GX])/,/^(?:[n])/,/^(?:[~])/,/^(?:[\r\n]+)/,/^(?:\s+)/,/^(?:$)/,/^(?:.)/],e.conditions={notes:{rules:[7,10,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0},text:{rules:[13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,40,41,42,43,44,49,50,51,52],inclusive:!0},annotations:{rules:[8,9,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0},options:{rules:[6,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0},command:{rules:[11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();typeof require!="undefined"&&typeof exports!="undefined"&&
(exports.parser=vextab_parser,exports.Parser=vextab_parser.Parser,exports.parse=function(){return vextab_parser.parse.apply(vextab_parser,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");var n,r;return typeof process!="undefined"?n=require("fs").readFileSync(require("path").resolve(t[1]),"utf8"):n=require("file").path(require("file").cwd()).join(t[1]).read({charset:"utf-8"}),exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args));/**
 * VexFlow TabDiv
 * Copyright Mohit Muthanna 2010 <mohit@muthanna.com>
 */
Vex.Flow.TabDiv=function(e,t){arguments.length>0&&this.init(e,t)},Vex.Flow.TabDiv.SEL=".vex-tabdiv",Vex.Flow.TabDiv.ERROR_NOCANVAS="<b>This browser does not support HTML5 Canvas</b><br/>Please use a modern browser such as <a href='http://google.com/chrome'>Google Chrome</a> or <a href='http://firefox.com'>Firefox</a>.",Vex.Flow.TabDiv.prototype.init=function(e,t){this.sel=e,this.code=$(e).text(),$(e).empty(),$(e).css("position")=="static"&&$(e).css("position","relative"),this.width=$(e).attr("width")||400,this.height=$(e).attr("height")||200,this.scale=$(e).attr("scale")||1,typeof Raphael=="undefined"?(this.canvas=$("<canvas></canvas>").addClass("vex-canvas"),$(e).append(this.canvas),this.renderer=new Vex.Flow.Renderer(this.canvas[0],Vex.Flow.Renderer.Backends.CANVAS)):(this.canvas=$("<div></div>").addClass("vex-canvas"),$(e).append(this.canvas),this.renderer=new Vex.Flow.Renderer(this.canvas[0],Vex.Flow.Renderer.Backends.RAPHAEL)),this.ctx_sel=$(e).find(".vex-canvas"),this.renderer.resize(this.width,this.height),this.ctx=this.renderer.getContext(),this.ctx.setBackgroundFillStyle(this.ctx_sel.css("background-color")),this.ctx.scale(this.scale,this.scale),this.editor=$(e).attr("editor")||"",this.show_errors=$(e).attr("show-errors")||"",this.editor_width=$(e).attr("editor_width")||this.width,this.editor_height=$(e).attr("editor_height")||200;var n=this;this.editor=="true"&&(this.text_area=$("<textarea></textarea>").addClass("editor").val(this.code),this.editor_error=$("<div></div>").addClass("editor-error"),$(e).append($("<p/>")).append(this.editor_error),$(e).append($("<p/>")).append(this.text_area),this.text_area.width(this.editor_width),this.text_area.height(this.editor_height),this.text_area.keyup(function(){n.timeoutID&&window.clearTimeout(n.timeoutID),n.timeoutID=window.setTimeout(function(){n.code!=n.text_area.val()&&(n.code=n.text_area.val(),n.redraw())},250)})),this.show_errors=="true"&&(this.editor_error=$("<div></div>").addClass("editor-error"),$(e).append($("<p/>")).append(this.editor_error)),this.artist=new Vex.Flow.Artist(10,0,this.width,{scale:this.scale}),this.parser=new Vex.Flow.VexTab(this.artist),Vex.Flow.Player&&(opts={},t&&(opts.soundfont_url=t.soundfont_url),this.player=new Vex.Flow.Player(this.artist,opts)),this.redraw()},Vex.Flow.TabDiv.prototype.redraw=function(){var e=this;return Vex.BM("Total render time: ",function(){e.parse(),e.draw()}),this},Vex.Flow.TabDiv.prototype.drawInternal=function(){return this.parser.isValid()?this.artist.draw(this.renderer):this},Vex.Flow.TabDiv.prototype.parseInternal=function(){try{this.artist.reset(),this.parser.reset(),this.parser.parse(this.code),this.editor_error.empty()}catch(e){this.editor_error&&(this.editor_error.empty(),this.editor_error.append($("<div></div>").addClass("text").html("Sucky VexTab: "+e.message)))}return this},Vex.Flow.TabDiv.prototype.parse=function(){var e=this;return Vex.BM("Parse time: ",function(){e.parseInternal()}),this},Vex.Flow.TabDiv.prototype.draw=function(){var e=this;return Vex.BM("Draw time: ",function(){e.drawInternal()}),this},Vex.Flow.TabDiv.start=function(){$(Vex.Flow.TabDiv.SEL).each(function(e){new Vex.Flow.TabDiv(this)})},$(function(){Vex.Flow.TabDiv.SEL&&Vex.Flow.TabDiv.start()});// Generated by CoffeeScript 1.4.0
(function(){var e=[].slice,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Vex.Flow.Artist=function(){function f(e,t,n,r){this.x=e,this.y=t,this.width=n,this.options={font_face:"Arial",font_size:10,font_style:null,bottom_spacing:20+(Vex.Flow.Artist.NOLOGO?0:10),tab_stave_lower_spacing:10,note_stave_lower_spacing:0,scale:1},r!=null&&_.extend(this.options,r),this.reset()}var n,r,i,s,o,u,a;return f.DEBUG=!1,n=function(){var t;t=1<=arguments.length?e.call(arguments,0):[];if(Vex.Flow.Artist.DEBUG)return typeof console!="undefined"&&console!==null?console.log.apply(console,["(Vex.Flow.Artist)"].concat(e.call(t))):void 0},f.NOLOGO=!1,f.prototype.reset=function(){return this.tuning=new Vex.Flow.Tuning,this.key_manager=new Vex.Flow.KeyManager("C"),this.music_api=new Vex.Flow.Music,this.customizations={"font-size":this.options.font_size,"font-face":this.options.font_face,"font-style":this.options.font_style,"annotation-position":"bottom",scale:this.options.scale,width:this.width,"stave-distance":0,space:0,player:"false",tempo:120,instrument:"acoustic_grand_piano",accidentals:"standard"},this.staves=[],this.tab_articulations=[],this.stave_articulations=[],this.player_voices=[],this.last_y=this.y,this.current_duration="q",this.current_clef="treble",this.current_bends={},this.current_octave_shift=0,this.bend_start_index=null,this.bend_start_strings=null,this.rendered=!1,this.renderer_context=null},f.prototype.attachPlayer=function(e){return this.player=e},f.prototype.setOptions=function(e){var r,i,s;n("setOptions: ",e),s=_.keys(this.customizations);for(r in e){i=e[r];if(!(t.call(s,r)>=0))throw new Vex.RERR("ArtistError","Invalid option '"+r+"'");this.customizations[r]=i}this.last_y+=parseInt(this.customizations.space,10);if(this.customizations.player==="true")return this.last_y+=15},f.prototype.getPlayerData=function(){return{voices:this.player_voices,context:this.renderer_context,scale:this.customizations.scale}},r=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;t!=null&&(v=t.stave),n!=null&&(h=n.stave),m=[],p=[],y=[],s=[],o=null,g=null;if(t!=null){C=t.voices;for(w=0,x=C.length;w<x;w++){c=C[w];if(_.isEmpty(c))continue;_.each(c,function(e){return e.setStave(v)}),b=(new Vex.Flow.Voice(Vex.Flow.TIME4_4)).setMode(Vex.Flow.Voice.Mode.SOFT),b.addTickables(c),m.push(b)}o=v,g=v}if(n!=null){l=n.voices.length>1?!0:!1,k=n.voices;for(f=E=0,T=k.length;E<T;f=++E){c=k[f];if(_.isEmpty(c))continue;d=f===0?1:-1,_.each(c,function(e){return e.setStave(h)}),b=(new Vex.Flow.Voice(Vex.Flow.TIME4_4)).setMode(Vex.Flow.Voice.Mode.SOFT),b.addTickables(c),p.push(b),l?s=s.concat(Vex.Flow.Beam.applyAndGetBeams(b,d)):s=Vex.Flow.Beam.applyAndGetBeams(b)}o=h,g=h}for(S=0,N=r.length;S<N;S++){c=r[S];if(_.isEmpty(c))continue;_.each(c,function(e){return e.setStave(g)}),b=(new Vex.Flow.Voice(Vex.Flow.TIME4_4)).setMode(Vex.Flow.Voice.Mode.SOFT),b.addTickables(c),y.push(b)}if(o!=null)return u=[],a=new Vex.Flow.Formatter,i=!1,t!=null&&(_.isEmpty(m)||a.joinVoices(m),u=m),n!=null&&(_.isEmpty(p)||a.joinVoices(p),u=u.concat(p),p.length>1&&(i=!0)),!_.isEmpty(r)&&!_.isEmpty(y)&&(a.joinVoices(y),u=u.concat(y)),_.isEmpty(u)||a.formatToStave(u,o,{align_rests:i}),t!=null&&_.each(m,function(t){return t.draw(e,v)}),n!=null&&_.each(p,function(t){return t.draw(e,h)}),n!=null&&_.each(s,function(t){return t.setContext(e).draw()}),_.isEmpty(r)||_.each(y,function(t){return t.draw(e,g)}),t!=null&&n!=null&&(new Vex.Flow.StaveConnector(n.stave,t.stave)).setContext(e).draw(),n!=null?p:m},f.prototype.render=function(e){var t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;n("Render: ",this.options),this.closeBends(),e.resize(this.customizations.width*this.customizations.scale,(this.last_y+this.options.bottom_spacing)*this.customizations.scale),s=e.getContext(),s.scale(this.customizations.scale,this.customizations.scale),s.clear(),s.setFont(this.options.font_face,this.options.font_size,""),this.renderer_context=s,o=function(e,t){var n;n=_.last(t);if(n instanceof Vex.Flow.BarNote)return t.pop(),e.setEndBarType(n.getType())},m=this.staves;for(l=0,p=m.length;l<p;l++)u=m[l],n("Rendering staves."),u.tab!=null&&o(u.tab,u.tab_notes),u.note!=null&&o(u.note,u.note_notes),u.tab!=null&&u.tab.setContext(s).draw(),u.note!=null&&u.note.setContext(s).draw(),u.tab_voices.push(u.tab_notes),u.note_voices.push(u.note_notes),a=r(s,u.tab!=null?{stave:u.tab,voices:u.tab_voices}:null,u.note!=null?{stave:u.note,voices:u.note_voices}:null,u.text_voices),this.player_voices.push(a);n("Rendering tab articulations."),g=this.tab_articulations;for(c=0,d=g.length;c<d;c++)i=g[c],i.setContext(s).draw();n("Rendering note articulations."),y=this.stave_articulations;for(h=0,v=y.length;h<v;h++)i=y[h],i.setContext(s).draw();this.player!=null&&(this.customizations.player==="true"?(this.player.setTempo(parseInt(this.customizations.tempo,10)),this.player.setInstrument(this.customizations.instrument),this.player.render()):this.player.removeControls()),this.rendered=!0;if(!Vex.Flow.Artist.NOLOGO)return t="vexflow.com",f=s.measureText(t).width,s.save(),s.setFont("Times",10,"italic"),s.fillText(t,(this.customizations.width-f)/2,this.last_y+25),s.restore()},f.prototype.isRendered=function(){return this.rendered},f.prototype.draw=function(e){return this.render(e)},f.prototype.getNoteForFret=function(e,t){var n,r,i,s,o,u,a,f;a=this.tuning.getNoteForFret(e,t),f=Vex.Flow.keyProperties(a),u=this.key_manager.selectNote(f.key),n=null;switch(this.customizations.accidentals){case"standard":u.change&&(n=u.accidental!=null?u.accidental:"n");break;case"cautionary":u.change?n=u.accidental!=null?u.accidental:"n":n=u.accidental!=null?u.accidental+"_c":void 0;break;default:throw new Vex.RERR("ArtistError","Invalid value for option 'accidentals': "+this.customizations.accidentals)}return r=u.note,i=f.octave,o=this.music_api.getNoteParts(f.key).root,s=this.music_api.getNoteParts(u.note).root,s==="b"&&o==="c"?i--:s==="c"&&o==="b"&&i++,[r,i,n]},f.prototype.getNoteForABC=function(e,t){var n,r,i;return r=e.key,i=t,n=e.accidental,e.accidental_type!=null&&(n+="_"+e.accidental_type),[r,i,n]},f.prototype.addStaveNote=function(e){var t,n,r,i,s,o,u,a,f,l;i={is_rest:!1,play_note:null},_.extend(i,e),u=_.last(this.staves).note_notes,o=new Vex.Flow.StaveNote({keys:i.spec,duration:this.current_duration+(i.is_rest?"r":""),clef:i.is_rest?"treble":this.current_clef,auto_stem:i.is_rest?!1:!0}),l=i.accidentals;for(n=a=0,f=l.length;a<f;n=++a)t=l[n],t!=null&&(s=t.split("_"),r=new Vex.Flow.Accidental(s[0]),s.length>1&&s[1]==="c"&&r.setAsCautionary(),o.addAccidental(n,r));return this.current_duration[this.current_duration.length-1]==="d"&&o.addDotToAll(),i.play_note!=null&&o.setPlayNote(i.play_note),u.push(o)},f.prototype.addTabNote=function(e,t){var n,r;return t==null&&(t=null),r=_.last(this.staves).tab_notes,n=new Vex.Flow.TabNote({positions:e,duration:this.current_duration}),t!=null&&n.setPlayNote(t),r.push(n)},a=function(e,t){return e+(t?"d":"")},f.prototype.setDuration=function(e,t){var r;return t==null&&(t=!1),r=e.split(/\s+/),n("setDuration: ",r[0],t),this.current_duration=a(r[0],t)},f.prototype.addBar=function(e){var t,r,i;n("addBar: ",e),this.closeBends(),this.key_manager.reset(),i=_.last(this.staves),t=Vex.Flow.Barline.type,e=function(){switch(e){case"single":return t.SINGLE;case"double":return t.DOUBLE;case"end":return t.END;case"repeat-begin":return t.REPEAT_BEGIN;case"repeat-end":return t.REPEAT_END;case"repeat-both":return t.REPEAT_BOTH;default:return t.SINGLE}}(),r=(new Vex.Flow.BarNote).setType(e),i.tab_notes.push(r);if(i.note!=null)return i.note_notes.push(r)},u=function(e,t){var n,r;return n=Vex.Flow.Bend.UP,r="",e>t?n=Vex.Flow.Bend.DOWN:r=function(){switch(Math.abs(t-e)){case 1:return"1/2";case 2:return"Full";case 3:return"1 1/2";default:return"Bend to "+t}}(),{type:n,text:r}},f.prototype.openBends=function(e,t,r,i){var s,o,a,f,l,c,h,p,d,v,m,g,y,b,w;n("openBends",e,t,r,i),d=_.last(this.staves).tab_notes,p=e,h=r,_.isEmpty(this.current_bends)?(this.bend_start_index=d.length-2,this.bend_start_strings=r):(p=d[this.bend_start_index],h=this.bend_start_strings),s=p.getPositions(),l=t.getPositions(),w=[];for(a=g=0,y=h.length;g<y;a=++g)f=h[a],c=i[a],o=e.getPositions()[r[a]],v=l[c],(b=(m=this.current_bends)[f])==null&&(m[f]=[]),w.push(this.current_bends[f].push(u(o.fret,v.fret)));return w},f.prototype.closeBends=function(e){var t,r,i,s,o,u,a,f,l,c,h,p;e==null&&(e=1);if(this.bend_start_index==null)return;n("closeBends("+e+")"),o=_.last(this.staves).tab_notes,h=this.current_bends;for(r in h){u=h[r],i=[];for(a=0,l=u.length;a<l;a++)t=u[a],i.push(t);o[this.bend_start_index].addModifier(new Vex.Flow.Bend(null,null,i),r)}p=o.slice(this.bend_start_index+1,+(o.length-2+e)+1||9e9);for(f=0,c=p.length;f<c;f++)s=p[f],s.setGhost(!0);return this.current_bends={},this.bend_start_index=null},f.prototype.makeTuplets=function(e,t){var r,i,s;n("makeTuplets",e,t),t==null&&(t=e);if(!_.last(this.staves).note)return;i=_.last(this.staves).note_notes,s=_.last(this.staves).tab_notes;if(i.length<t)throw new Vex.RERR("ArtistError","Not enough notes for tuplet");return r=new Vex.Flow.Tuplet(i.slice(i.length-t),{num_notes:e}),this.stave_articulations.push(r),new Vex.Flow.Tuplet(s.slice(s.length-t),{num_notes:e})},i=function(e){return e.match(/^\.fingering\/([^.]+)\./)},f.prototype.makeFingering=function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v;c=i(e),t=Vex.Flow.Modifier.Position,o=[],s=[];if(c==null)return null;o=function(){var e,t,n,r;n=c[1].split(/-/),r=[];for(e=0,t=n.length;e<t;e++)l=n[e],r.push(l.trim());return r}(),n=function(){return new Vex.RERR("ArtistError","Bad fingering: "+c[1])};for(d=0,v=o.length;d<v;d++){r=o[d],h=r.match(/(\d+):([ablr]):([fs]):([^-.]+)/);if(h==null)throw n();a=parseInt(h[1],10)-1,p=t.RIGHT;switch(h[2]){case"l":p=t.LEFT;break;case"r":p=t.RIGHT;break;case"a":p=t.ABOVE;break;case"b":p=t.BELOW}u=null,f=h[4];switch(h[3]){case"s":u=(new Vex.Flow.StringNumber(f)).setPosition(p);break;case"f":u=(new Vex.Flow.FretHandFinger(f)).setPosition(p)}s.push({num:a,modifier:u})}return s},o=function(e){return e.match(/^\.stroke\/([^.]+)\./)},f.prototype.makeStroke=function(e){var t,n,r;n=o(e),t=Vex.Flow.Stroke.Type,r=null;if(n!=null){switch(n[1]){case"bu":r=t.BRUSH_UP;break;case"bd":r=t.BRUSH_DOWN;break;case"ru":r=t.ROLL_UP;break;case"rd":r=t.ROLL_DOWN;break;case"qu":r=t.RASQUEDO_UP;break;case"qd":r=t.RASQUEDO_DOWN;break;default:throw new Vex.RERR("ArtistError","Invalid stroke type: "+n[1])}return new Vex.Flow.Stroke(r)}return null},s=function(e){return e.match(/^\.(a[^\/]*)\/(t|b)[^.]*\./)},f.prototype.makeScoreArticulation=function(e){var t,n,r,i,o;return n=s(e),n!=null?(o=n[1],i=n[2],t=Vex.Flow.Modifier.Position,r=i==="t"?t.ABOVE:t.BELOW,(new Vex.Flow.Articulation(o)).setPosition(r)):null},f.prototype.makeAnnotation=function(e){var t,n,r,i,s,o,u,a,f;i=this.customizations["font-face"],s=this.customizations["font-size"],o=this.customizations["font-style"],n=this.customizations["annotation-position"],t=Vex.Flow.Annotation.VerticalJustify,r=n==="top"?t.TOP:t.BOTTOM,a=function(e,t){return t==null&&(t=r),(new Vex.Flow.Annotation(e)).setFont(i,s,o).setVerticalJustification(t)},f=e.match(/^\.([^-]*)-([^-]*)-([^.]*)\.(.*)/);if(f!=null)return i=f[1],s=f[2],o=f[3],e=f[4],e?a(e):null;f=e.match(/^\.([^.]*)\.(.*)/);if(f!=null){u=r,e=f[2];switch(f[1]){case"big":o="bold",s="14";break;case"italic":case"italics":i="Times",o="italic";break;case"medium":s="12";break;case"top":u=t.TOP,this.customizations["annotation-position"]="top";break;case"bottom":u=t.BOTTOM,this.customizations["annotation-position"]="bottom"}return e?a(e,u):null}return a(e)},f.prototype.addAnnotations=function(e){var t,n,r,i,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;f=_.last(this.staves),l=f.note_notes,p=f.tab_notes;if(e.length>p.length)throw new Vex.RERR("ArtistError","More annotations than note elements");if(f.tab){w=p.slice(p.length-e.length);for(i=d=0,g=w.length;d<g;i=++d)h=w[i],s(e[i])?(a=this.makeScoreArticulation(e[i]),h.addModifier(a,0)):o(e[i])?(c=this.makeStroke(e[i]),h.addModifier(c,0)):(t=this.makeAnnotation(e[i]),t&&h.addModifier(this.makeAnnotation(e[i]),0))}else{E=l.slice(l.length-e.length);for(i=v=0,y=E.length;v<y;i=++v)u=E[i],s(e[i])||(t=this.makeAnnotation(e[i]),t&&u.addAnnotation(0,this.makeAnnotation(e[i])))}if(f.note){S=l.slice(l.length-e.length),x=[];for(i=m=0,b=S.length;m<b;i=++m){u=S[i],a=this.makeScoreArticulation(e[i]),a!=null&&u.addArticulation(0,a),c=this.makeStroke(e[i]),c!=null&&u.addStroke(0,c),r=this.makeFingering(e[i]);if(r!=null)try{x.push(function(){var e,t,i;i=[];for(e=0,t=r.length;e<t;e++)n=r[e],i.push(u.addModifier(n.num,n.modifier));return i}())}catch(T){throw new Vex.RERR("ArtistError","Bad note number in fingering: "+e[i])}else x.push(void 0)}return x}},f.prototype.addTabArticulation=function(e,t,r,i,s){var o;n("addTabArticulations: ",e,t,r,i,s),e==="t"&&r.addModifier((new Vex.Flow.Annotation("T")).setVerticalJustification(Vex.Flow.Annotation.VerticalJustify.BOTTOM));if(_.isEmpty(i)&&_.isEmpty(s))return;o=null,e==="s"&&(o=new Vex.Flow.TabSlide({first_note:t,last_note:r,first_indices:i,last_indices:s}));if(e==="h"||e==="p")o=new Vex.Flow.TabTie({first_note:t,last_note:r,first_indices:i,last_indices:s},e.toUpperCase());if(e==="T"||e==="t")o=new Vex.Flow.TabTie({first_note:t,last_note:r,first_indices:i,last_indices:s}," ");e==="b"&&this.openBends(t,r,i,s);if(o!=null)return this.tab_articulations.push(o)},f.prototype.addStaveArticulation=function(e,t,r,i,s){var o;n("addStaveArticulations: ",e,t,r,i,s),o=null;if(e==="b"||e==="s"||e==="h"||e==="p"||e==="t"||e==="T")o=new Vex.Flow.StaveTie({first_note:t,last_note:r,first_indices:i,last_indices:s});if(o!=null)return this.stave_articulations.push(o)},f.prototype.getPreviousNoteIndex=function(){var e,t,n;n=_.last(this.staves).tab_notes,e=2;while(e<=n.length){t=n[n.length-e];if(t instanceof Vex.Flow.TabNote)return n.length-e;e++}return-1},f.prototype.addDecorator=function(e){var t,r,i,s,o,u;n("addDecorator: ",e);if(e==null)return;s=_.last(this.staves),o=s.tab_notes,i=s.note_notes,t=null,r=null,e==="v"&&(t=new Vex.Flow.Vibrato),e==="V"&&(t=(new Vex.Flow.Vibrato).setHarsh(!0)),e==="u"&&(t=(new Vex.Flow.Articulation("a|")).setPosition(Vex.Flow.Modifier.Position.BOTTOM),r=(new Vex.Flow.Articulation("a|")).setPosition(Vex.Flow.Modifier.Position.BOTTOM)),e==="d"&&(t=(new Vex.Flow.Articulation("am")).setPosition(Vex.Flow.Modifier.Position.BOTTOM),r=(new Vex.Flow.Articulation("am")).setPosition(Vex.Flow.Modifier.Position.BOTTOM)),t!=null&&_.last(o).addModifier(t,0);if(r!=null)return(u=_.last(i))!=null?u.addArticulation(0,r):void 0},f.prototype.addArticulations=function(e){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;n("addArticulations: ",e),d=_.last(this.staves),m=d.tab_notes,v=d.note_notes;if(_.isEmpty(m)||_.isEmpty(e)){this.closeBends(0);return}s=_.last(m),o=!1,S=["b","s","h","p","t","T","v","V"];for(w=0,E=S.length;w<E;w++){y=S[w],a=function(){var t,n,i;i=[];for(u=t=0,n=e.length;t<n;u=++t)r=e[u],r!=null&&r===y&&i.push(u);return i}();if(_.isEmpty(a))continue;y==="b"&&(o=!0),c=this.getPreviousNoteIndex(),c===-1?(p=null,h=null):(p=m[c],g=function(){var e,n,r,i;r=s.getPositions(),i=[];for(u=e=0,n=r.length;e<n;u=++e)f=r[u],t.call(a,u)>=0&&i.push(f.str);return i}(),b=function(){var e,n,r,i,s;r=p.getPositions(),s=[];for(u=e=0,n=r.length;e<n;u=++e)l=r[u],(i=l.str,t.call(g,i)>=0)&&s.push(l.str);return s}(),h=function(){var e,n,r,i,s;r=p.getPositions(),s=[];for(u=e=0,n=r.length;e<n;u=++e)f=r[u],(i=f.str,t.call(b,i)>=0)&&s.push(u);return s}(),i=function(){var e,n,r,i,o;r=s.getPositions(),o=[];for(u=e=0,n=r.length;e<n;u=++e)f=r[u],(i=f.str,t.call(b,i)>=0)&&o.push(u);return o}()),d.tab!=null&&this.addTabArticulation(y,p,s,h,i),d.note!=null&&this.addStaveArticulation(y,v[c],_.last(v),h,i)}if(!o)return this.closeBends(0)},f.prototype.addRest=function(e){var t,r;return n("addRest: ",e),this.closeBends(),e.position===0?this.addStaveNote({spec:["r/4"],accidentals:[],is_rest:!0}):(t=this.tuning.getNoteForFret((parseInt(e.position,10)+5)*2,6),this.addStaveNote({spec:[t],accidentals:[],is_rest:!0})),r=_.last(this.staves).tab_notes,r.push(new Vex.Flow.GhostNote(this.current_duration))},f.prototype.addChord=function(e,t,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,A,O,M,D,P,H,B,j,F;if(_.isEmpty(e))return;n("addChord: ",e),k=_.last(this.staves),C=[],S=[],o=[],a=[],h=[],A=[],p=[],b=0,c=_.first(e).string,l=0;for(O=0,P=e.length;O<P;O++){g=e[O],b++;if(g.abc!=null||g.string!==c)l=0,c=g.string;C[l]==null&&(C[l]=[],S[l]=[],o[l]=[],A[l]=[],a[l]=[],h[l]=[]),B=[null,null,null],v=B[0],m=B[1],s=B[2],E=null;if(g.abc!=null)w=g.octave!=null?g.octave:g.string,j=this.getNoteForABC(g.abc,w),v=j[0],m=j[1],s=j[2],s!=null?i=s.split("_")[0]:i="",E=""+v+i,g.fret==null&&(g.fret="X");else{if(g.fret==null)throw new Vex.RERR("ArtistError","No note specified");F=this.getNoteForFret(g.fret,g.string),v=F[0],m=F[1],s=F[2],E=this.tuning.getNoteForFret(g.fret,g.string).split("/")[0]}x=parseInt(m,10)+this.current_octave_shift,f=g.time!=null?{time:g.time,dot:g.dot}:null,C[l].push(""+v+"/"+m),S[l].push(""+E+"/"+x),o[l].push(s),A[l].push({fret:g.fret,str:g.string}),g.articulation!=null&&a[l].push(g.articulation),p[l]=f,g.decorator!=null&&(h[l]=g.decorator),l++}for(d=M=0,H=C.length;M<H;d=++M)N=C[d],T=this.current_duration,p[d]!=null&&this.setDuration(p[d].time,p[d].dot),this.addTabNote(A[d],S[d]),k.note!=null&&this.addStaveNote({spec:N,accidentals:o[d],play_note:S[d]}),this.addArticulations(a[d]),h[d]!=null&&this.addDecorator(h[d]);if(t!=null){u=[];for(y=D=1;1<=b?D<=b:D>=b;y=1<=b?++D:--D)u.push(t);this.addArticulations(u)}if(r!=null)return this.addDecorator(r)},f.prototype.addNote=function(e){return this.addChord([e])},f.prototype.addTextVoice=function(){return _.last(this.staves).text_voices.push([])},f.prototype.setTextFont=function(e){var t;if(e!=null){t=e.match(/([^-]*)-([^-]*)-([^.]*)/);if(t!=null)return this.customizations["font-face"]=t[1],this.customizations["font-size"]=parseInt(t[2],10),this.customizations["font-style"]=t[3]}},f.prototype.addTextNote=function(e,t,n,r,i){var s,o,u,a,f,l,c,h;t==null&&(t=0),n==null&&(n="center"),r==null&&(r=!0),i==null&&(i=!1),h=_.last(this.staves).text_voices;if(_.isEmpty(h))throw new Vex.RERR("ArtistError","Can't add text note without text voice");return o=this.customizations["font-face"],u=this.customizations["font-size"],a=this.customizations["font-style"],f=function(){switch(n){case"center":return Vex.Flow.TextNote.Justification.CENTER;case"left":return Vex.Flow.TextNote.Justification.LEFT;case"right":return Vex.Flow.TextNote.Justification.RIGHT;default:return Vex.Flow.TextNote.Justification.CENTER}}(),s=i?"b":this.current_duration,c={text:e,duration:s,smooth:r,ignore_ticks:i,font:{family:o,size:u,weight:a}},e[0]==="#"&&(c.glyph=e.slice(1)),l=(new Vex.Flow.TextNote(c)).setLine(t).setJustification(f),_.last(h).push(l)},f.prototype.addVoice=function(e){var t;this.closeBends(),t=_.last(this.staves);if(t==null)return this.addStave(e);_.isEmpty(t.tab_notes)||(t.tab_voices.push(t.tab_notes),t.tab_notes=[]);if(!_.isEmpty(t.note_notes))return t.note_voices.push(t.note_notes),t.note_notes=[]},f.prototype.addStave=function(e){var t,r,i,s;r={tuning:"standard",clef:"treble",key:"C",notation:"false",tablature:"true"},_.extend(r,e),n("addTabStave: ",e),i=null,t=null,s=40,r.notation==="true"&&(t=(new Vex.Flow.Stave(this.x,this.last_y,this.customizations.width-20)).addClef(r.clef).addKeySignature(r.key),r.time!=null&&t.addTimeSignature(r.time),this.last_y+=t.getHeight()+this.options.note_stave_lower_spacing+parseInt(this.customizations["stave-distance"],10),s=t.getNoteStartX(),this.current_clef=r.clef),r.tablature==="true"&&(i=(new Vex.Flow.TabStave(this.x,this.last_y,this.customizations.width-20)).addTabGlyph().setNoteStartX(s),this.last_y+=i.getHeight()+this.options.tab_stave_lower_spacing),this.closeBends(),this.staves.push({tab:i,note:t,tab_voices:[],note_voices:[],tab_notes:[],note_notes:[],text_voices:[]}),this.tuning.setTuning(r.tuning),this.key_manager.setKey(r.key)},f.prototype.runCommand=function(e,t,r){var i;t==null&&(t=0),r==null&&(r=0),n("runCommand: ",e),i=e.split(/\s+/);switch(i[0]){case"octave-shift":return this.current_octave_shift=parseInt(i[1],10),n("Octave shift: ",this.current_octave_shift);default:throw new Vex.RERR("ArtistError","Invalid command '"+i[0]+"' at line "+t+" column "+r)}},f}()}).call(this);// Generated by CoffeeScript 1.4.0
(function(){var e=[].slice,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Vex.Flow.VexTab=function(){function i(e){this.artist=e,this.reset()}var n,r;return i.DEBUG=!1,n=function(){var t;t=1<=arguments.length?e.call(arguments,0):[];if(Vex.Flow.VexTab.DEBUG)return typeof console!="undefined"&&console!==null?console.log.apply(console,["(Vex.Flow.VexTab)"].concat(e.call(t))):void 0},r=function(e,t){return new Vex.RERR("ParseError",""+t+" in line "+e._l+" column "+e._c)},i.prototype.reset=function(){return this.valid=!1,this.elements=!1},i.prototype.isValid=function(){return this.valid},i.prototype.parseStaveOptions=function(e){var n,i,s,o,u,a,f,l,c,h,p;u={notation:"false",tablature:"true"};if(e==null)return u;s=null;for(f=0,l=e.length;f<l;f++){o=e[f],i=function(e){return r(o,e)},u[o.key]=o.value;switch(o.key){case"notation":case"tablature":s=o;if((c=o.value)!=="true"&&c!=="false")throw i("'"+o.key+"' must be 'true' or 'false'");break;case"key":if(!_.has(Vex.Flow.keySignature.keySpecs,o.value))throw i("Invalid key signature '"+o.value+"'");break;case"clef":n=["treble","bass","tenor","alto","percussion"];if(h=o.value,t.call(n,h)<0)throw i("'clef' must be one of "+n.join(", "));break;case"voice":a=["top","bottom","new"];if(p=o.value,t.call(a,p)<0)throw i("'voice' must be one of "+a.join(", "));break;case"time":try{new Vex.Flow.TimeSignature(o.value)}catch(d){throw i("Invalid time signature: '"+o.value+"'")}break;case"tuning":try{new Vex.Flow.Tuning(o.value)}catch(d){throw i("Invalid tuning: '"+o.value+"'")}break;default:throw i("Invalid option '"+o.key+"'")}}if(u.notation==="false"&&u.tablature==="false")throw r(s,"Both 'notation' and 'tablature' can't be invisible");return u},i.prototype.parseCommand=function(e){e.command==="bar"&&this.artist.addBar(e.type),e.command==="tuplet"&&this.artist.makeTuplets(e.params.tuplet,e.params.notes),e.command==="annotations"&&this.artist.addAnnotations(e.params),e.command==="rest"&&this.artist.addRest(e.params);if(e.command==="command")return this.artist.runCommand(e.params,e._l,e._c)},i.prototype.parseChord=function(e){return n("parseChord:",e),this.artist.addChord(_.map(e.chord,function(e){return _.pick(e,"time","dot","fret","abc","octave","string","articulation","decorator")}),e.articulation,e.decorator)},i.prototype.parseFret=function(e){return this.artist.addNote(_.pick(e,"time","dot","fret","string","articulation","decorator"))},i.prototype.parseABC=function(e){return this.artist.addNote(_.pick(e,"time","dot","fret","abc","octave","string","articulation","decorator"))},i.prototype.parseStaveElements=function(e){var t,r,i,s;n("parseStaveElements:",e),s=[];for(r=0,i=e.length;r<i;r++)t=e[r],t.time&&this.artist.setDuration(t.time,t.dot),t.command&&this.parseCommand(t),t.chord&&this.parseChord(t),t.abc?s.push(this.parseABC(t)):t.fret?s.push(this.parseFret(t)):s.push(void 0);return s},i.prototype.parseStaveText=function(e){var t,n,i,s,o,u,a,f,l,c,h,p,d=this;_.isEmpty(e)||this.artist.addTextVoice(),u=0,o="center",a=!0,s=null,t=function(){return d.artist.addTextNote("",0,o,!1,!0)},i=function(e){var t;t=!1,e[0]==="|"&&(t=!0,e=e.slice(1));try{return d.artist.addTextNote(e,u,o,a,t)}catch(n){throw r(f,"Bad text or duration. Did you forget a comma?"+n)}},p=[];for(c=0,h=e.length;c<h;c++){f=e[c],l=f.text.trim();if(l.match(/\.font=.*/))s=l.slice(6),p.push(this.artist.setTextFont(s));else if(l[0]===":")p.push(this.artist.setDuration(l));else if(l[0]==="."){n=l.slice(1);switch(n){case"center":case"left":case"right":p.push(o=n);break;case"strict":p.push(a=!1);break;case"smooth":p.push(a=!0);break;case"bar":case"|":p.push(t());break;default:p.push(u=parseInt(l.slice(1),10))}}else l==="|"?p.push(t()):l.slice(0,2)==="++"?p.push(this.artist.addTextVoice()):p.push(i(l))}return p},i.prototype.generate=function(){var e,t,n,i,s,o,u,a,f,l;a=this.elements,l=[];for(i=0,o=a.length;i<o;i++){n=a[i];switch(n.element){case"stave":case"tabstave":this.artist.addStave(this.parseStaveOptions(n.options)),n.notes!=null&&this.parseStaveElements(n.notes),n.text!=null?l.push(this.parseStaveText(n.text)):l.push(void 0);break;case"voice":this.artist.addVoice(this.parseStaveOptions(n.options)),n.notes!=null&&this.parseStaveElements(n.notes),n.text!=null?l.push(this.parseStaveText(n.text)):l.push(void 0);break;case"options":t={},f=n.params;for(s=0,u=f.length;s<u;s++)e=f[s],t[e.key]=e.value;try{l.push(this.artist.setOptions(t))}catch(c){throw r(n,c.message)}break;default:throw r(n,"Invalid keyword '"+n.element+"'")}}return l},i.prototype.parse=function(e){var t,r;vextab_parser.parseError=function(e,t){throw n("VexTab parse error: ",e,t),e="Unexpected text '"+t.text+"' at line "+t.loc.first_line+" column "+t.loc.first_column+".",new Vex.RERR("ParseError",e)};if(e==null)throw new Vex.RERR("ParseError","No code");return n("Parsing:\n"+e),r=function(){var n,r,i,s;i=e.split(/\r\n|\r|\n/),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(t.trim());return s}(),this.elements=vextab_parser.parse(r.join("\n")),this.elements&&(this.generate(),this.valid=!0),this.elements},i}()}).call(this);